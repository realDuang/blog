import{_ as t,r as i,o as a,c as r,a as e,d as l,e as n,b as s}from"./app-B9TWmIeZ.js";const p={},c=s('<p><img src="https://zakum-1252497671.cos.ap-guangzhou.myqcloud.com/20240925152320.png" alt="20240925152320"></p><hr><div class="custom-container tip"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 8h.01"></path><path d="M11 12h1v4h1"></path></g></svg><p class="custom-container-title">TIP</p><p>本文将以 <strong>黑神话：悟空</strong> 为例，介绍如何对基于虚幻 5 引擎的游戏进行逆向工程。包括游戏解包、文件导出、资产制作、替换和打包，以及 mod 的安装和运行参数设置。</p></div><h2 id="获取游戏解包密码-aes" tabindex="-1"><a class="header-anchor" href="#获取游戏解包密码-aes"><span>获取游戏解包密码 AES</span></a></h2><p>首先，我们需要获取黑神话悟空的解包密码 AES，这是进行游戏文件解包的必要步骤。</p><p><strong>步骤:</strong></p><ol><li><strong>找到游戏安装执行目录</strong>: 通常位于 steam 游戏安装目录的 <code>BlackMythWukong\\b1\\Binaries\\Win64</code>。</li><li><strong>搜索相关工具</strong>: 常见的工具有 <code>AES_finder</code> 等。</li><li><strong>查找密码</strong>: 使用特定脚本或工具从游戏执行文件中，在该目录下运行并提取 key。</li></ol><p><img src="https://zakum-1252497671.cos.ap-guangzhou.myqcloud.com/20240925133342.png" alt="https://www.bilibili.com/video/BV1VpsWekEPa"></p><hr><h2 id="获取-mappings-usmap-文件" tabindex="-1"><a class="header-anchor" href="#获取-mappings-usmap-文件"><span>获取 Mappings.usmap 文件</span></a></h2><p>为了准确解包和解析游戏数据，需要从游戏目录中获取 <code>Mappings.usmap</code> 文件。</p><p><strong>步骤:</strong></p>',12),d=e("li",null,[e("strong",null,"使用 DLL_injector 工具"),l(": 通过 DLL 注入工具获取游戏内存中的 "),e("code",null,"Mappings.usmap"),l(" 文件。")],-1),g=e("strong",null,"导入 UE Mapping Dumper",-1),u={href:"https://github.com/TheNaeem/UnrealMappingsDumper",target:"_blank",rel:"noopener noreferrer"},h=e("li",null,[e("strong",null,"运行游戏"),l(": 运行游戏后，打开 "),e("code",null,"DLL injector"),l(", 加载 "),e("code",null,"UE Mapping Dumper"),l("并等待 "),e("code",null,"Mappings.usmap"),l(" 文件生成。")],-1),m=e("p",null,[e("img",{src:"https://zakum-1252497671.cos.ap-guangzhou.myqcloud.com/20240925134329.png",alt:"https://www.bilibili.com/video/BV1VpsWekEPa"})],-1),_=e("hr",null,null,-1),b=e("h2",{id:"导出文件到-fmodel",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#导出文件到-fmodel"},[e("span",null,"导出文件到 FModel")])],-1),k=e("p",null,[e("code",null,"FModel"),l(" 是一个强大的工具，可以帮助我们对 UE4/5 的资源文件进行逆向分析。")],-1),w=e("p",null,[e("strong",null,"解包工具"),l(":")],-1),v={href:"https://github.com/4sval/FModel/releases",target:"_blank",rel:"noopener noreferrer"},E={href:"https://www.gildor.org/en/projects/umodel",target:"_blank",rel:"noopener noreferrer"},f=e("p",null,[e("strong",null,"步骤:")],-1),M=e("strong",null,"下载并安装 FModel",-1),V={href:"https://github.com/FModel/FModel",target:"_blank",rel:"noopener noreferrer"},z=e("li",null,[e("strong",null,"加载 Mappings.usmap 文件"),l(": "),e("ul",null,[e("li",null,[l("打开 FModel，选择 "),e("code",null,"Mappings"),l(" 选项卡。")]),e("li",null,[l("导入从游戏解包得到的 "),e("code",null,"Mappings.usmap"),l(" 文件。")])])],-1),y=s('<p><img src="https://zakum-1252497671.cos.ap-guangzhou.myqcloud.com/20240925134601.png" alt="https://www.bilibili.com/video/BV1VpsWekEPa"></p><ol start="3"><li><strong>分析资源文件</strong>: 选择需要逆向的资源 pak 文件进行分析和导出。黑神话悟空的 pak 文件使用了 AES 加密，需要提供正确的 AES 密钥。填入第一步中获取到的 AES 密钥即可。</li></ol><p><img src="https://zakum-1252497671.cos.ap-guangzhou.myqcloud.com/20240925134734.png" alt="https://www.bilibili.com/video/BV1VpsWekEPa"></p><p><strong>FYI</strong>: pak 文件大致对应的资源类型:</p><p><img src="https://zakum-1252497671.cos.ap-guangzhou.myqcloud.com/20240925135228.png" alt="https://www.bilibili.com/video/BV1VpsWekEPa"></p><p>至此，我们已经成功导出了游戏资源文件，逆向工程结束，接下来可以就开始为黑神话悟空制作资产了。</p><hr><h2 id="使用三维软件制作资产" tabindex="-1"><a class="header-anchor" href="#使用三维软件制作资产"><span>使用三维软件制作资产</span></a></h2><p>一旦资源文件导出完毕，我们需要使用三维软件进行资产的制作。</p><p><strong>常用软件:</strong></p>',10),x={href:"https://www.blender.org/",target:"_blank",rel:"noopener noreferrer"},U=e("li",null,"3ds Max",-1),B=e("li",null,"3D Viewer",-1),P=e("li",null,"Maya",-1),S=s('<p><strong>步骤:</strong></p><ol><li><strong>导入资源文件</strong>: 通过 FModel 导出的模型文件可以导入到三维软件中进行编辑。</li></ol><p><img src="https://zakum-1252497671.cos.ap-guangzhou.myqcloud.com/image-1.png" alt="https://www.bilibili.com/video/BV1VpsWekEPa"></p><p><img src="https://zakum-1252497671.cos.ap-guangzhou.myqcloud.com/image-3.png" alt="https://www.bilibili.com/video/BV1VpsWekEPa"></p><p><img src="https://zakum-1252497671.cos.ap-guangzhou.myqcloud.com/image-2.png" alt="https://www.bilibili.com/video/BV1VpsWekEPa"></p><ol><li><p><strong>导出资产</strong>: 以 Unreal Engine 5 兼容的格式导出模型，如 <code>.fbx</code>, <code>.psk</code>(For Blender) 格式。</p></li><li><p><strong>制作新资产</strong>: 根据需要制作或修改模型。</p></li></ol><p><img src="https://zakum-1252497671.cos.ap-guangzhou.myqcloud.com/20240925150459.png" alt="https://www.bilibili.com/video/BV1VpsWekEPa"></p><p><img src="https://zakum-1252497671.cos.ap-guangzhou.myqcloud.com/image-5.png" alt="https://www.bilibili.com/video/BV1VpsWekEPa"></p><p>关于纹理、贴图和材质的制作，可以使用 Photoshop 或 Substance Painter 等软件进行。与 Maya 或 Blender 等三维软件配合使用，可以制作出高质量的游戏资产。这里就不展开细说了。</p><hr><h2 id="使用-ue5-引擎替换和打包资产" tabindex="-1"><a class="header-anchor" href="#使用-ue5-引擎替换和打包资产"><span>使用 UE5 引擎替换和打包资产</span></a></h2><p>下一步是使用 UE5 引擎替换并打包我们制作的资产。</p><p><strong>步骤:</strong></p><ol><li><strong>打开 UE5 项目</strong>: <ul><li>打开 Unreal Engine 5。</li><li>创建或打开一个新项目。</li></ul></li><li><strong>导入新资产</strong>: <ul><li>将 <code>.fbx</code> 文件导入到 UE5。</li><li>替换原有模型或添加新模型到 UE 中。 <img src="https://zakum-1252497671.cos.ap-guangzhou.myqcloud.com/image-6.png" alt="https://www.bilibili.com/video/BV1VpsWekEPa"></li></ul></li><li><strong>打包项目</strong>: <ul><li>在 UE5 中选择 <code>File &gt; Package Project</code>。</li><li>选择目标平台（Windows）并开始打包。</li></ul></li><li><strong>生成 mod 文件</strong>: <ul><li>选择打包 target 为 pak 文件。</li><li>将打包生成的文件移动到游戏 mod 目录中。</li></ul></li></ol><hr><h2 id="_7-mod-的安装和运行参数" tabindex="-1"><a class="header-anchor" href="#_7-mod-的安装和运行参数"><span>7. mod 的安装和运行参数</span></a></h2><p>最后，简单介绍一下安装和运行 mod 的步骤。</p>',17),W={href:"https://www.nexusmods.com/blackmythwukong/mods/19",target:"_blank",rel:"noopener noreferrer"},q=e("li",null,[e("strong",null,"复制打包文件"),l(": 将 UE5 打包的文件复制到游戏 mod 目录中。")],-1),F=e("li",null,[e("strong",null,"配置运行参数"),l(": 根据需要修改游戏启动选项以加载 mod。")],-1),L=s(`<div class="language-markdown line-numbers-mode" data-ext="md" data-title="md"><pre class="language-markdown"><code>BlackMythWukong\\b1\\Binaries\\Win64
dwmapi.dll (124,928)
ue4ss
UE4SS-settings.ini
UE4SS.dll
VTableLayout.ini
Mods
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="彩蛋-解包发现的有趣数据" tabindex="-1"><a class="header-anchor" href="#彩蛋-解包发现的有趣数据"><span>彩蛋 -- 解包发现的有趣数据</span></a></h2><p><img src="https://zakum-1252497671.cos.ap-guangzhou.myqcloud.com/1629427721289528.gif" alt="1629427721289528"></p><p>翻滚的无敌帧是 <code>0.3s</code>, <code>0.34s</code>, <code>0.365s</code> (连续翻滚的动画效果与无敌时间都是不同的)，其中出现完美闪避(闪避时原地留下残影)的窗口是 <code>0.1s</code>。</p><p>大圣的攻击动作共分为 5 段，前四段收招后进行下一段连击前可以进行识破。</p><p>大圣出棍动作维持时间（以棍形态为例）是 <code>0.8s</code>，<code>1.1s</code>，<code>1.0s</code>，<code>1.4s</code>（终结棍 由于不能接识破，不计入动作），其中判断连击的窗口是 <code>0.3s</code>。</p><p>因此，要打出识破，必须要提前进行某一段攻击行为，并在连击窗口期间对手攻击生效，此时打出重击进行识破。可以注意到，1，2，3 段动作由于动作持续时间较短，更容易打出识破。</p><p><img src="https://zakum-1252497671.cos.ap-guangzhou.myqcloud.com/image-7.png" alt="https://www.bilibili.com/video/BV1ZUpue6EXM"></p>`,9),D={href:"https://www.bilibili.com/video/BV1ZUpue6EXM",target:"_blank",rel:"noopener noreferrer"},A=s('<hr><h2 id="_8-总结" tabindex="-1"><a class="header-anchor" href="#_8-总结"><span>8. 总结</span></a></h2><p>通过此教程，我们已经学习了针对黑神话悟空的解包工具的使用、文件提取、三维资产制作、替换和打包、以及 mod 的安装和运行参数设置。这只是一个基础教程，但其中已经包含了游戏资产开发的所有步骤与流程，感兴趣的同学可以探索更多高级功能和优化流程。</p><p><img src="https://zakum-1252497671.cos.ap-guangzhou.myqcloud.com/20240925152424.png" alt="20240925152424"></p><h2 id="参考" tabindex="-1"><a class="header-anchor" href="#参考"><span>参考</span></a></h2>',5),N={href:"https://www.bilibili.com/video/BV1VpsWekEPa",target:"_blank",rel:"noopener noreferrer"},T={href:"https://www.nexusmods.com/blackmythwukong",target:"_blank",rel:"noopener noreferrer"};function j(I,C){const o=i("ExternalLinkIcon");return a(),r("div",null,[c,e("ol",null,[d,e("li",null,[g,l(": 这是一个将为 UE 生成映射文件的项目，几乎所有未来的 UE5 游戏都是必需的，以便从游戏文件中读取数据。去 "),e("a",u,[l("Github"),n(o)]),l(" 上下载。")]),h]),m,_,b,k,w,e("ul",null,[e("li",null,[l("FModel: "),e("a",v,[l("https://github.com/4sval/FModel/releases"),n(o)])]),e("li",null,[l("UE Viewer: "),e("a",E,[l("https://www.gildor.org/en/projects/umodel"),n(o)])])]),f,e("ol",null,[e("li",null,[M,l(": "),e("a",V,[l("FModel GitHub"),n(o)])]),z]),y,e("ul",null,[e("li",null,[e("a",x,[l("Blender"),n(o)])]),U,B,P]),S,e("ol",null,[e("li",null,[l("先给游戏本体注入 Mod Loader: "),e("a",W,[l("RE-UE4SS"),n(o)])]),q,F]),L,e("p",null,[e("a",D,[l("参考来源"),n(o)])]),A,e("p",null,[e("a",N,[l("黑神话·悟空 mod 制作教学"),n(o)])]),e("p",null,[e("a",T,[l("N 网"),n(o)])])])}const Z=t(p,[["render",j],["__file","black-myth-ue5-reverse-engineering.html.vue"]]),G=JSON.parse('{"path":"/blogs/others/black-myth-ue5-reverse-engineering.html","title":"Unreal Engine 5 逆向工程与游戏开发 - 黑神话悟空","lang":"en-US","frontmatter":{"title":"Unreal Engine 5 逆向工程与游戏开发 - 黑神话悟空","date":"2024-09-25T17:21:22.000Z","categories":["其他"],"tags":["逆向工程","游戏开发"]},"headers":[{"level":2,"title":"获取游戏解包密码 AES","slug":"获取游戏解包密码-aes","link":"#获取游戏解包密码-aes","children":[]},{"level":2,"title":"获取 Mappings.usmap 文件","slug":"获取-mappings-usmap-文件","link":"#获取-mappings-usmap-文件","children":[]},{"level":2,"title":"导出文件到 FModel","slug":"导出文件到-fmodel","link":"#导出文件到-fmodel","children":[]},{"level":2,"title":"使用三维软件制作资产","slug":"使用三维软件制作资产","link":"#使用三维软件制作资产","children":[]},{"level":2,"title":"使用 UE5 引擎替换和打包资产","slug":"使用-ue5-引擎替换和打包资产","link":"#使用-ue5-引擎替换和打包资产","children":[]},{"level":2,"title":"7. mod 的安装和运行参数","slug":"_7-mod-的安装和运行参数","link":"#_7-mod-的安装和运行参数","children":[]},{"level":2,"title":"彩蛋 -- 解包发现的有趣数据","slug":"彩蛋-解包发现的有趣数据","link":"#彩蛋-解包发现的有趣数据","children":[]},{"level":2,"title":"8. 总结","slug":"_8-总结","link":"#_8-总结","children":[]},{"level":2,"title":"参考","slug":"参考","link":"#参考","children":[]}],"git":{"createdTime":1733141773000,"updatedTime":1733141773000,"contributors":[{"name":"Duang Cheng","email":"longcheng@microsoft.com","commits":1}]},"filePathRelative":"blogs/others/black-myth-ue5-reverse-engineering.md"}');export{Z as comp,G as data};
